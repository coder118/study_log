# 목차

1. [식별,비식별 관계](#식별비식별-관계-db의-관계-26228)
---------

## 식별,비식별 관계/ db의 관계 26.2.28


1. 식별 관계(identifying) : 부모의 pk가 자식 pk의 일부가 되는 관계이다. (부모 없이는 자식의 존재 자체가 정의 되지 않는다.)

2. 비식별 관계(non-identifying): 부모의 pk가 자식의 일반 외래키(FK)으로만 들어가는 관계이다.(부모가가 없으면 고아가 될 수 있지만, 자식 자체로 고유한 Id를 가진다.)

> 테이블 구현 과정에서 식별과 비식별 어떤 것을 선택?

게시글과 댓글 테이블의 관계를 생각했을때 1:n의 관계를 가지고 있으면서 댓글은 결국 게시글이 존재할때만 존재할 수 있으니까 식별 관계로 만들려고 했다.

논리적으로는 식별관계가 맞다고 한다. 하지만 식별관계로 사용했을때 문제점이 있다.

- 식별 관계라면 댓글의 PK는 (게시글 ID + 댓글 순번)이 된다.

만약 이런 상태에서 댓글의 댓글이 달린다고 생각해보자 댓글의 PK는 (게시글 ID+댓글 ID+ 대댓글 순번)이런식으로 PK가 커지게 되면서 관리하기 까다로워진다.

또한 요구사항이 어떻게 바뀌게 될지 모른다. 식별관계를 사용할시 자식 테이블이 부모 키에 종속되어 있어 수정이 어려워질 수 있다.

> 식별관계를 사용하는 사례

부모가 없으면 존재 가치가 아예 없는 강한 종속성을 가질때 사용된다.
ex> order 테이블과 order_item 테이블 => 상세 아이템은 반드시 특정 주문에 귀속되어야 의미가 있고 보통 주문하나에 종속되기 때문이다.

> 회원과 게시물 테이블의 관계는 1:n? n:m?

- 회원 입장: 유저 한명은 게시물을 10개 쓸수 있다. -> 1:N
- 게시물 입장 : 방금 "안녕하세요"라는 특정 글(ID:100)은 작성자가 누구인가? 오직 나(ID:1) 한명이다. ->N:1

예외적으로, 게시글 하나를 여러명이 공동으로 집필하는 시스템의 경우(예>구글 문서)라면 N:M이될 수 있다.

>그럼 N:M은 언제 사용되는가?

양쪽 모두가 서로를 여러개 가질 수 있을때 사용된다.

ex>
- 게시물과 해시태그
    - 글 하나에 여러개(#자바,#공부,#글)를 달 수 있다.(1:N)
    - #자바 라는 태그가 다린 글도 여러개 있을 수 있다. (1:M)
    - 이러면 N:M의 관계가 된다.

- 게시물과 좋아요
    - 한명의 회원은 여러 게시물에 좋아요를 누를 수있다(1:N)
    - 한개의 게시물은 여러명의 회원에게 좋아요를 받을 수 있다.(1:M)


주의할점은 DB에서 N:M의 관계를 직접 생성할 수 없기에 중간에 연결고리 역할을 하는 매핑 테이블을 두어서 1:N-N:1로 풀어내야 한다.

ex> 
게시물 - (게시물_태그) - 태그

유저 - 좋아요 테이블 - 게시물



[erdCloud사용법 학습](https://inpa.tistory.com/entry/ERD-CLOUD-%E2%98%81%EF%B8%8F-ERD-%EB%8B%A4%EC%9D%B4%EC%96%B4%EA%B7%B8%EB%9E%A8%EC%9D%84-%EC%98%A8%EB%9D%BC%EC%9D%B8%EC%97%90%EC%84%9C-%EA%B7%B8%EB%A0%A4%EB%B3%B4%EC%9E%90)


[n:m관계](https://siyoon210.tistory.com/26)

